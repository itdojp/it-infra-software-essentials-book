<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="700" viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: 'Noto Sans JP', sans-serif; font-size: 20px; font-weight: bold; fill: #2c3e50; }
      .layer-title { font-family: 'Noto Sans JP', sans-serif; font-size: 14px; font-weight: bold; fill: #fff; }
      .component-title { font-family: 'Noto Sans JP', sans-serif; font-size: 12px; font-weight: bold; fill: #2c3e50; }
      .text-content { font-family: 'Noto Sans JP', sans-serif; font-size: 11px; fill: #2c3e50; }
      .small-text { font-family: 'Noto Sans JP', sans-serif; font-size: 10px; fill: #7f8c8d; }
      .presentation-layer { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .application-layer { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; }
      .domain-layer { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .infrastructure-layer { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .cross-cutting { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; }
      .component { fill: #fff; stroke: #95a5a6; stroke-width: 1; }
      .flow-arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .dependency-arrow { stroke: #7f8c8d; stroke-width: 1; stroke-dasharray: 3,2; fill: none; marker-end: url(#arrowhead-gray); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e"/>
    </marker>
    <marker id="arrowhead-gray" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#7f8c8d"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" class="title" text-anchor="middle">ソフトウェアアーキテクチャの層構造</text>

  <!-- Presentation Layer -->
  <g id="presentation">
    <rect x="100" y="60" width="600" height="100" class="presentation-layer" rx="10"/>
    <text x="400" y="85" class="layer-title" text-anchor="middle">プレゼンテーション層</text>
    
    <rect x="120" y="95" width="110" height="50" class="component" rx="3"/>
    <text x="175" y="115" class="text-content" text-anchor="middle">Web UI</text>
    <text x="175" y="130" class="small-text" text-anchor="middle">HTML/CSS/JS</text>
    
    <rect x="250" y="95" width="110" height="50" class="component" rx="3"/>
    <text x="305" y="115" class="text-content" text-anchor="middle">Mobile UI</text>
    <text x="305" y="130" class="small-text" text-anchor="middle">iOS/Android</text>
    
    <rect x="380" y="95" width="110" height="50" class="component" rx="3"/>
    <text x="435" y="115" class="text-content" text-anchor="middle">Desktop UI</text>
    <text x="435" y="130" class="small-text" text-anchor="middle">Windows/Mac</text>
    
    <rect x="510" y="95" width="110" height="50" class="component" rx="3"/>
    <text x="565" y="115" class="text-content" text-anchor="middle">CLI</text>
    <text x="565" y="130" class="small-text" text-anchor="middle">Terminal</text>
  </g>

  <!-- Application Layer -->
  <g id="application">
    <rect x="100" y="190" width="600" height="120" class="application-layer" rx="10"/>
    <text x="400" y="215" class="layer-title" text-anchor="middle">アプリケーション層</text>
    
    <rect x="120" y="230" width="130" height="60" class="component" rx="3"/>
    <text x="185" y="250" class="text-content" text-anchor="middle">API Gateway</text>
    <text x="185" y="265" class="small-text" text-anchor="middle">REST/GraphQL</text>
    <text x="185" y="280" class="small-text" text-anchor="middle">認証・認可</text>
    
    <rect x="270" y="230" width="130" height="60" class="component" rx="3"/>
    <text x="335" y="250" class="text-content" text-anchor="middle">Controllers</text>
    <text x="335" y="265" class="small-text" text-anchor="middle">リクエスト処理</text>
    <text x="335" y="280" class="small-text" text-anchor="middle">レスポンス生成</text>
    
    <rect x="420" y="230" width="130" height="60" class="component" rx="3"/>
    <text x="485" y="250" class="text-content" text-anchor="middle">Use Cases</text>
    <text x="485" y="265" class="small-text" text-anchor="middle">ビジネスロジック</text>
    <text x="485" y="280" class="small-text" text-anchor="middle">トランザクション</text>
    
    <rect x="570" y="230" width="110" height="60" class="component" rx="3"/>
    <text x="625" y="250" class="text-content" text-anchor="middle">Services</text>
    <text x="625" y="265" class="small-text" text-anchor="middle">外部連携</text>
    <text x="625" y="280" class="small-text" text-anchor="middle">共通処理</text>
  </g>

  <!-- Domain Layer -->
  <g id="domain">
    <rect x="100" y="340" width="600" height="120" class="domain-layer" rx="10"/>
    <text x="400" y="365" class="layer-title" text-anchor="middle">ドメイン層</text>
    
    <rect x="120" y="380" width="130" height="60" class="component" rx="3"/>
    <text x="185" y="400" class="text-content" text-anchor="middle">Entities</text>
    <text x="185" y="415" class="small-text" text-anchor="middle">ビジネスエンティティ</text>
    <text x="185" y="430" class="small-text" text-anchor="middle">ドメインモデル</text>
    
    <rect x="270" y="380" width="130" height="60" class="component" rx="3"/>
    <text x="335" y="400" class="text-content" text-anchor="middle">Value Objects</text>
    <text x="335" y="415" class="small-text" text-anchor="middle">値オブジェクト</text>
    <text x="335" y="430" class="small-text" text-anchor="middle">不変性</text>
    
    <rect x="420" y="380" width="130" height="60" class="component" rx="3"/>
    <text x="485" y="400" class="text-content" text-anchor="middle">Domain Services</text>
    <text x="485" y="415" class="small-text" text-anchor="middle">ドメインロジック</text>
    <text x="485" y="430" class="small-text" text-anchor="middle">集約ルート</text>
    
    <rect x="570" y="380" width="110" height="60" class="component" rx="3"/>
    <text x="625" y="400" class="text-content" text-anchor="middle">Events</text>
    <text x="625" y="415" class="small-text" text-anchor="middle">ドメインイベント</text>
    <text x="625" y="430" class="small-text" text-anchor="middle">CQRS</text>
  </g>

  <!-- Infrastructure Layer -->
  <g id="infrastructure">
    <rect x="100" y="490" width="600" height="120" class="infrastructure-layer" rx="10"/>
    <text x="400" y="515" class="layer-title" text-anchor="middle">インフラストラクチャ層</text>
    
    <rect x="120" y="530" width="130" height="60" class="component" rx="3"/>
    <text x="185" y="550" class="text-content" text-anchor="middle">Database</text>
    <text x="185" y="565" class="small-text" text-anchor="middle">RDB/NoSQL</text>
    <text x="185" y="580" class="small-text" text-anchor="middle">ORM/ODM</text>
    
    <rect x="270" y="530" width="130" height="60" class="component" rx="3"/>
    <text x="335" y="550" class="text-content" text-anchor="middle">Message Queue</text>
    <text x="335" y="565" class="small-text" text-anchor="middle">RabbitMQ/Kafka</text>
    <text x="335" y="580" class="small-text" text-anchor="middle">非同期処理</text>
    
    <rect x="420" y="530" width="130" height="60" class="component" rx="3"/>
    <text x="485" y="550" class="text-content" text-anchor="middle">Cache</text>
    <text x="485" y="565" class="small-text" text-anchor="middle">Redis/Memcached</text>
    <text x="485" y="580" class="small-text" text-anchor="middle">セッション管理</text>
    
    <rect x="570" y="530" width="110" height="60" class="component" rx="3"/>
    <text x="625" y="550" class="text-content" text-anchor="middle">Storage</text>
    <text x="625" y="565" class="small-text" text-anchor="middle">S3/NFS</text>
    <text x="625" y="580" class="small-text" text-anchor="middle">ファイル管理</text>
  </g>

  <!-- Cross-Cutting Concerns -->
  <g id="cross-cutting">
    <rect x="730" y="60" width="140" height="550" class="cross-cutting" rx="10"/>
    <text x="800" y="85" class="layer-title" text-anchor="middle">横断的関心事</text>
    
    <rect x="745" y="105" width="110" height="40" class="component" rx="3"/>
    <text x="800" y="125" class="text-content" text-anchor="middle">Logging</text>
    <text x="800" y="138" class="small-text" text-anchor="middle">ログ収集</text>
    
    <rect x="745" y="155" width="110" height="40" class="component" rx="3"/>
    <text x="800" y="175" class="text-content" text-anchor="middle">Security</text>
    <text x="800" y="188" class="small-text" text-anchor="middle">セキュリティ</text>
    
    <rect x="745" y="205" width="110" height="40" class="component" rx="3"/>
    <text x="800" y="225" class="text-content" text-anchor="middle">Monitoring</text>
    <text x="800" y="238" class="small-text" text-anchor="middle">監視・通知</text>
    
    <rect x="745" y="255" width="110" height="40" class="component" rx="3"/>
    <text x="800" y="275" class="text-content" text-anchor="middle">Exception</text>
    <text x="800" y="288" class="small-text" text-anchor="middle">例外処理</text>
    
    <rect x="745" y="305" width="110" height="40" class="component" rx="3"/>
    <text x="800" y="325" class="text-content" text-anchor="middle">Validation</text>
    <text x="800" y="338" class="small-text" text-anchor="middle">入力検証</text>
    
    <rect x="745" y="355" width="110" height="40" class="component" rx="3"/>
    <text x="800" y="375" class="text-content" text-anchor="middle">Transaction</text>
    <text x="800" y="388" class="small-text" text-anchor="middle">トランザクション</text>
    
    <rect x="745" y="405" width="110" height="40" class="component" rx="3"/>
    <text x="800" y="425" class="text-content" text-anchor="middle">Configuration</text>
    <text x="800" y="438" class="small-text" text-anchor="middle">設定管理</text>
  </g>

  <!-- Layer Dependencies -->
  <path d="M 400 160 L 400 190" class="flow-arrow"/>
  <path d="M 400 310 L 400 340" class="flow-arrow"/>
  <path d="M 400 460 L 400 490" class="flow-arrow"/>
  
  <!-- Cross-cutting connections -->
  <path d="M 730 110 L 700 110" class="dependency-arrow"/>
  <path d="M 730 250 L 700 250" class="dependency-arrow"/>
  <path d="M 730 400 L 700 400" class="dependency-arrow"/>
  <path d="M 730 550 L 700 550" class="dependency-arrow"/>

  <!-- Principles -->
  <g id="principles">
    <rect x="50" y="630" width="820" height="50" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="5"/>
    <text x="460" y="650" class="component-title" text-anchor="middle">設計原則</text>
    <text x="100" y="665" class="small-text">• 関心の分離（SoC）</text>
    <text x="250" y="665" class="small-text">• 依存性逆転（DIP）</text>
    <text x="400" y="665" class="small-text">• 単一責任（SRP）</text>
    <text x="550" y="665" class="small-text">• 開放閉鎖（OCP）</text>
    <text x="700" y="665" class="small-text">• インターフェース分離（ISP）</text>
  </g>
</svg>